<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Catégories
    </a>
    <ul class="dropdown-menu">
        <li>
            <a class="dropdown-item" href="{{ path('app_categories') }}">Toutes les catégories</a>
        </li>
        <li><hr class="dropdown-divider"></li>

        {% for category in categories %}
            {# TA LOGIQUE ROBUSTE (HEAD) #}
            {% set isActive = app.request.get('_route') == 'app_category_events' and app.request.get('id') == category.id %}
            
            <li>
                {# TON LIEN VERS LA ROUTE DÉDIÉE #}
                <a class="dropdown-item {% if isActive %}active{% endif %}" 
                   href="{{ path('app_category_events', {'id': category.id}) }}"
                   {% if isActive %}style="background-color: {{ category.couleur }}; color: white;"{% endif %}>
                    <span class="me-2">{{ category.icone }}</span>
                    {{ category.nom }}
                </a>
            </li>
        {% endfor %}
    </ul>
</li>