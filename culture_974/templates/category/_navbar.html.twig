{# templates/category/_navbar.html.twig #}
<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        Catégories
    </a>
    <ul class="dropdown-menu">
        <li>
            <a class="dropdown-item" href="{{ path('app_categories') }}">Toutes les catégories</a>
        </li>
        <li><hr class="dropdown-divider"></li>

        {% for category in categories %}
            {# 
               NOUVELLE LOGIQUE "ACTIVE" :
               On regarde si la route actuelle est bien 'app_category_events' 
               ET si l'id dans l'URL correspond à la catégorie de la boucle.
            #}
            {% set isActive = app.request.get('_route') == 'app_category_events' and app.request.get('id') == category.id %}
            
            <li>
                {# 
                   NOUVEAU LIEN :
                   On pointe vers la route définie dans showEvents() du contrôleur
                #}
                <a class="dropdown-item {% if isActive %}active{% endif %}" 
                   href="{{ path('app_category_events', {'id': category.id}) }}"
                   {% if isActive %}style="background-color: {{ category.couleur }}; color: white;"{% endif %}>
                    <span class="me-2">{{ category.icone }}</span>
                    {{ category.nom }}
                </a>
            </li>
        {% endfor %}
    </ul>
</li>